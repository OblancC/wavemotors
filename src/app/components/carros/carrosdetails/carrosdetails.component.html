<div class="container">
  <br>
  <div class="card">
    <div class="card-body centralizar">

      <mdb-form-control>
        <input mdbInput type="text" id="form1" class="form-control" (keyup.enter)="save()" [(ngModel)]="carro.modelo" />
        <label mdbLabel class="form-label" for="form1">Modelo do Carro</label>
      </mdb-form-control>
      <br>

      <div>
        @if(carro.marca == null){
        <button type="button" class="btn btn-primary " mdbRipple (click)="buscarMarca()">Buscar Marca</button>
        }@else {
        <div class="row">
          <div class="col-lg-8">
            <p class="text-primary alert-primary">Marca do Carro: {{carro.marca.nome}}</p>
          </div>
          <div class="col-lg-4">
            <button type="button" class="btn btn-primary " mdbRipple (click)="buscarMarca()">Alterar Marca</button>
          </div>
        </div>
        }
      </div>

      <br>
      <mdb-form-control>
        <input mdbInput type="text" id="form1" class="form-control" (keyup.enter)="save()" [(ngModel)]="carro.ano" />
        <label mdbLabel class="form-label" for="form1">Ano do Carro</label>
      </mdb-form-control>
      <br>
      <mdb-form-control>
        <input mdbInput type="text" id="form1" class="form-control" (keyup.enter)="save()" [(ngModel)]="carro.cor" />
        <label mdbLabel class="form-label" for="form1">Cor do Carro</label>
      </mdb-form-control>
      <br>
      <mdb-form-control>
        <input mdbInput type="text" id="form1" class="form-control" (keyup.enter)="save()" [(ngModel)]="carro.valor" />
        <label mdbLabel class="form-label" for="form1">Preço do Carro</label>
      </mdb-form-control>
      <br>
      <mdb-form-control>
        <input mdbInput type="text" id="form1" class="form-control" (keyup.enter)="save()" [(ngModel)]="carro.combustivel" />
        <label mdbLabel class="form-label" for="form1">Tipo de Combustivel</label>
      </mdb-form-control>
      <br>
      <mdb-form-control>
        <input mdbInput type="text" id="form1" class="form-control" (keyup.enter)="save()" [(ngModel)]="carro.placa" />
        <label mdbLabel class="form-label" for="form1">Placa do Carro</label>
      </mdb-form-control>
      <br>
      <mdb-form-control>
        <input mdbInput type="text" id="form1" class="form-control" (keyup.enter)="save()" [(ngModel)]="carro.km" />
        <label mdbLabel class="form-label" for="form1">Quilometragem do Carro</label>
      </mdb-form-control>
      
      <div>
        <button type="button" class="btn btn-primary" mdbRipple(click)="buscarAcessorio()">Buscar</button>
        <br>
        <table border="1" class="table table-striped">
          <thead>
            <tr>
              <th>ID</th>
              <th>Nome</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            @for (acessorio of carro.acessorios; track $index){
            <tr>
              <td>{{acessorio.id}}</td>
              <td>{{acessorio.nome}}</td>
              <td>
                <button type="button" class="btn btn-danger" mdbRipple
                  (click)="removerAcessorio(acessorio)">Remover</button>
              </td>
            </tr>
            }
          </tbody>
        </table>
      </div>

      <br>
      <button (click)="save()" type="button" class="btn btn-primary btn-rounded" mdbRipple>
        Salvar
      </button>


    </div>
  </div>
</div>
<br>

<ng-template #modalMarcas>
  <div class="modal-header">
    <h5 class="modal-title" id="exampleModalLabel">Marcas</h5>
    <button type="button" class="btn-close" aria-label="Close" (click)="modalRef.close()"></button>
  </div>
  <div class="modal-body">
    <app-marcaslist [esconderBotoes]="true" (retorno)="retornoMarca($event)"></app-marcaslist>
  </div>
</ng-template>

<ng-template #modalAcessorios>
  <div class="modal-header">
    <h5 class="modal-title" id="exampleModalLabel">Acessórios</h5>
    <button type="button" class="btn-close" aria-label="Close" (click)="modalRef.close()"></button>
  </div>
  <div class="modal-body">

    <app-acessorioslist [esconderBotoes]="true" (retorno)="retornoAcessorio($event)"></app-acessorioslist>

  </div>

</ng-template>
